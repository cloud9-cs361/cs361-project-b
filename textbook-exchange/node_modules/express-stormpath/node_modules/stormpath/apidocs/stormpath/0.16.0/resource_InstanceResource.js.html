<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: resource/InstanceResource.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: resource/InstanceResource.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var Resource = require('./Resource');
var utils = require('../utils');

/**
 * @class
 *
 * Low-level resource wrapper for Stormpath resource objects.
 */
function InstanceResource() {
  InstanceResource.super_.apply(this, arguments);
}
utils.inherits(InstanceResource, Resource);

InstanceResource.prototype.get = function getResource() {

  var args = Array.prototype.slice.call(arguments);

  var propName = args[0];
  var callback = args[args.length - 1];

  var val = this[propName];

  if (!val) {
    var e1 = new Error('There is no field named \'' + propName + '\'.');
    callback(e1, null);
    return;
  }
  if (!val.href) {
    var e2 = new Error('Field \'' + propName + '\' is not a reference property - it is not an object with an \'href\'' +
      'property.  Do not call \'get\' for ' +
      'non reference properties - access them normally, for example: resource.fieldName or resource[\'fieldName\']');
    callback(e2, null);
    return;
  }

  var query = null;
  var ctor = null;

  //check if query params supplied:
  if (args[1] instanceof Object &amp;&amp; !(args[1] instanceof Function)) {
    query = args[1];
  }

  //check if a constructor function was supplied to instantiate a returned resource:
  var secondToLastArg = args[args.length - 2];
  if (secondToLastArg instanceof Function &amp;&amp; utils.isAssignableFrom(Resource, secondToLastArg)) {
    ctor = secondToLastArg;
  }

  this.dataStore.getResource(val.href, query, ctor, callback);
};

/**
 * Save changes to this resource.
 *
 * @param  {Function} callback
 * The function to call when the save operation is complete.  Will be called
 * with the parameters (err,updatedResource).
 */
InstanceResource.prototype.save = function saveResource(callback) {
  this.dataStore.saveResource(this, callback);
};

/**
 * Deletes this resource from the API.
 *
 * @param  {Function} callback
 * The function to call when the delete operation is complete.  Will be called
 * with the parameter (err).
 */
InstanceResource.prototype.delete = function deleteResource(callback) {
  this.dataStore.deleteResource(this, callback);
};

module.exports = InstanceResource;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-stormpath.html">stormpath</a></li></ul><h3>Classes</h3><ul><li><a href="Account.html">Account</a></li><li><a href="Application.html">Application</a></li><li><a href="AuthenticationResult.html">AuthenticationResult</a></li><li><a href="Cache.html">Cache</a></li><li><a href="CacheEntry.html">CacheEntry</a></li><li><a href="CacheManager.html">CacheManager</a></li><li><a href="CacheStats.html">CacheStats</a></li><li><a href="Client.html">Client</a></li><li><a href="CollectionResource.html">CollectionResource</a></li><li><a href="DataStore.html">DataStore</a></li><li><a href="Directory.html">Directory</a></li><li><a href="DirectoryChildResource.html">DirectoryChildResource</a></li><li><a href="InstanceResource.html">InstanceResource</a></li><li><a href="JwtAuthenticationResult.html">JwtAuthenticationResult</a></li><li><a href="MemcachedStore.html">MemcachedStore</a></li><li><a href="OAuthPasswordGrantAuthenticationResult.html">OAuthPasswordGrantAuthenticationResult</a></li><li><a href="OAuthPasswordGrantRequestAuthenticator.html">OAuthPasswordGrantRequestAuthenticator</a></li><li><a href="ObjectCallProxy.html">ObjectCallProxy</a></li><li><a href="PasswordResetToken.html">PasswordResetToken</a></li><li><a href="RedisStore.html">RedisStore</a></li><li><a href="RequestExecutor.html">RequestExecutor</a></li><li><a href="SamlPolicy.html">SamlPolicy</a></li><li><a href="SamlServiceProvider.html">SamlServiceProvider</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createResource">createResource</a></li><li><a href="global.html#defaults">defaults</a></li><li><a href="global.html#getAuthenticator">getAuthenticator</a></li><li><a href="global.html#getResource">getResource</a></li><li><a href="global.html#instantiate">instantiate</a></li><li><a href="global.html#isAssignableFrom">isAssignableFrom</a></li><li><a href="global.html#valueOf">valueOf</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Feb 04 2016 13:34:11 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
